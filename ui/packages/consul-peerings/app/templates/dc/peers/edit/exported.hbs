<Route @name={{routeName}} as |route|>
  <DataLoader
    @src={{uri
      "/${partition}/${nspace}/${dc}/exported-services/${name}"
      (hash
        partition=route.params.partition
        nspace=route.params.nspace
        dc=route.params.dc
        name=route.model.peer.Name
      )
    }}
    as |api|
  >
    {{#let
      (or route.params.partition route.model.user.token.Partition "default")
      api.data
      as |partition items|
    }}

      <BlockSlot @name="error">
        <AppError @error={{api.error}} @login={{route.model.app.login.open}} />
      </BlockSlot>

      <BlockSlot @name="loaded">
        <div class="hds-surface-faint flex h-12 py-1.5 px-1">
          <div>
            <Hds::Form::TextInput::Field @type="search" placeholder="Search" />
          </div>
        </div>
        <Consul::Service::List @items={{items}} @partition={{partition}} />
      </BlockSlot>
    {{/let}}
  </DataLoader>
</Route>